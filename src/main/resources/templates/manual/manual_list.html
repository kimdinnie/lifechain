<html layout:decorate="~{layout}">
	<div layout:fragment="content" class="container">
		

<link rel="stylesheet" th:href="@{/assets/css/heart_icon.css}"/>

<style>
  /* ëª¨ë‹¬ ë°°ê²½ì„ ë¶ˆíˆ¬ëª…í•˜ê²Œ ì„¤ì •í•©ë‹ˆë‹¤. */
  .modal-backdrop {
    background-color: rgba(0, 0, 0, 0); /* ë°°ê²½ìƒ‰ê³¼ íˆ¬ëª…ë„ ì¡°ì ˆ */
  }
  .modal-transparent .modal-content {
    background-color: rgba(255, 255, 255, 0.9); /* ë°°ê²½ìƒ‰ê³¼ íˆ¬ëª…ë„ ì¡°ì ˆ */
  }
  
    /* ëª¨ë‹¬ì˜ í¬ê¸°ë¥¼ ì¡°ì •í•©ë‹ˆë‹¤. */
  .modal-content {
    max-width: 250px; /* ìµœëŒ€ ë„ˆë¹„ ì„¤ì • */
    width: auto; /* ë„ˆë¹„ ìë™ ì„¤ì • */
    max-height: 70px;
    height: auto;
  }

</style>
<div class="container-xxl custom-container">
  <div class="row my-3">
	  
          <nav
            class="layout-navbar container-xxl navbar navbar-expand-xl navbar-detached align-items-center bg-navbar-theme"
            id="layout-navbar"
          >
            <div class="layout-menu-toggle navbar-nav align-items-xl-center me-3 me-xl-0 d-xl-none">
              <a class="nav-item nav-link px-0 me-xl-4" href="javascript:void(0)">
                <i class="bx bx-menu bx-sm"></i>
              </a>
            </div>

            <div class="navbar-nav-right d-flex align-items-center" id="navbar-collapse">
              <!-- Search -->
              <a th:href="@{/manual/search}">
              <div class="navbar-nav align-items-center" id = "area">
                <div class="nav-item d-flex align-items-center">
				
                  <i class="bx bx-search fs-4 lh-0"></i>
                  
					<input type="text" class="form-control border-0 shadow-none" placeholder="ë©”ë‰´ì–¼ì„ ê²€ìƒ‰í•˜ì„¸ìš”." aria-label="Search..." id="search-input" />
                </div>
              </div>
              </a>
              <!-- /Search -->
            </div>
          </nav>

          <!-- / Navbar -->
          

	  
<h5 class="my-4">ğŸ‘ ì‘ê¸‰</h5>
    <div class="col-lg-12 col-md-12 order-1">
      <div class="row">
		  
        <div class="col-lg-4 col-md-6 col-12 mb-4" th:each="manual, loop : ${manualList}">
          <div class="card">
            <div class="card-body">
              <div class="card-title d-flex align-items-start justify-content-between">
                <div class="avatar flex-shrink-0">
                  <span class="badge bg-label-success me-1" th:text="${manual.manualType}"></span>
                </div>
                <div class="love-icon">
					<input type="checkbox" th:id="'like-toggle-'+ ${manual.id}" th:onchange="'toggleBookmark('+ ${manual.id} +');'" />
					<label th:for="'like-toggle-'+${manual.id}" class="heart"></label>
                </div>
              </div>
              <img th:src="${manual.manualPic}" alt="CPR Image" style="width: 50%; margin-bottom: 30px; display: block; margin-left: auto; margin-right: auto;">
              <h3 class="card-title mb-2"><a th:href="@{|/manual/detail/${manual.id}|}" th:text="${manual.subject}"></a></h3>
              <small class="text-success fw-semibold" th:text="${manual.summary}"></small>
            </div>
          </div>
        </div>
        
        <!-- ëª¨ë‹¬ì°½ -->
<div class="modal fade" id="bookmark-modal" tabindex="-1" aria-labelledby="bookmark-modal-label" aria-hidden="true">
  <div class="modal-dialog modal-dialog-bottom">
    <div class="modal-content">
      <div class="modal-body">
        <p id="bookmark-message"></p>
      </div>
    </div>
  </div>
</div>


        
        
        
      </div>
    </div>
  </div>
</div>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
function toggleBookmark(id) {
    const isChecked = document.getElementById(`like-toggle-${id}`).checked;

    console.log(isChecked);
    const url = `/bookmark/${id}`;
    if (isChecked) {
      fetch(url, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ id }),
      })
        .then(response => {
          // ì‘ë‹µì„ ì²˜ë¦¬í•˜ëŠ” ì½”ë“œ ì‘ì„±
        if (!response.ok) {
        throw new Error(`${response.status} ${response.statusText}`);
	      }
	      return response.json(); // JSON í˜•íƒœë¡œ ë³€í™˜í•˜ì—¬ ë°˜í™˜
	    })
	    .then(result => {
	      console.log(result); // ê°€ê³µëœ ì‘ë‹µ ë°ì´í„° ì¶œë ¥
	    })
        .catch(error => {
          console.error(error);
        });
    } else {
      // ë¶ë§ˆí¬ ì‚­ì œ ìš”ì²­ ì½”ë“œ ì‘ì„±
      fetch(`${url}/${id}`, {
        method: 'DELETE',
        headers: {
          'Content-Type': 'application/json',
        },
      })
        .then(response => {
          // ì‘ë‹µì„ ì²˜ë¦¬í•˜ëŠ” ì½”ë“œ ì‘ì„±
        })
        .catch(error => {
          console.error(error);
        });
    }
}
</script>



</div>
